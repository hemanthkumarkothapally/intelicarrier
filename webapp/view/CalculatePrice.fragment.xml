<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:l="sap.ui.layout">
    <Dialog >
        <customHeader>
            <Bar design="Header">
                <contentLeft>
                    <Title text="ðŸ’° Calculate Price â€” Internal Fleet" level="H2"/>
                </contentLeft>
                
                <contentRight>
                    <Button icon="sap-icon://decline" press="onCloseCalculatePrice"/>
                </contentRight>
            </Bar>
        </customHeader>
        <content>
            <VBox class="sapUiSmallMargin">
                
                <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginBottom">
                    <Title text="{id}" level="H3" />
                    <ObjectStatus text="Ready to Calculate" state="Information" inverted="true" />
                </HBox>

                <Panel headerText="ðŸ“¦ Shipment Information" expandable="false" expanded="true" width="auto" class="sapUiSmallMarginBottom">
                    <form:SimpleForm editable="false" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4" columnsL="2" columnsM="2">
                        <form:content>
                            <Label text="Customer" design="Bold"/> <Text text="{customer}" />
                            <Label text="Driver" design="Bold"/> <Text text="Somchai P. (DRV-001)" />
                            <Label text="Origin" design="Bold"/> <Text text="{origin}" />
                            <Label text="Destination" design="Bold"/> <Text text="{destination}" />
                            <Label text="Distance" design="Bold"/> <Text text="{distance} km" />
                            <Label text="Weight" design="Bold"/> <Text text="{weight} kg" />
                            <Label text="Delivered At" design="Bold"/> <Text text="{deliveredAt}" />
                            <Label text="Service Type" design="Bold"/> <Text text="Standard Freight" />
                        </form:content>
                    </form:SimpleForm>
                </Panel>

                <Panel headerText="ðŸ“‹ Rate Master Applied" expandable="false" expanded="true" width="auto" class="sapUiSmallMarginBottom">
                    <form:SimpleForm 
                        editable="false"
                        layout="ResponsiveGridLayout"
                        labelSpanXL="4" labelSpanL="4" labelSpanM="4" labelSpanS="12"
                        adjustLabelSpan="false"
                        emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
                        columnsM="2" columnsL="2"
                        singleContainerFullSize="false">
                        
                        <form:content>
                            <core:Title text="Agreement Info:" />
                            
                            <Label text="Rate Agreement" design="Bold" />
                            <Text text="{rateId}" />

                            <Label text="Type" design="Bold" />
                            <Text text="Customer Rate - {customer}" />


                            <core:Title text="Rate Details:" />

                            <Label text="Base Rate" />
                            <Text text="à¸¿18.50 / km" />

                            <Label text="Weight Rate" />
                            <Text text="à¸¿2.00 / kg" />

                            <Label text="Fuel Surcharge" />
                            <Text text="8.5%" />

                            <Label text="Discount" />
                            <Text text="5%" />

                        </form:content>
                    </form:SimpleForm>
                </Panel>

                <Panel headerText="ðŸ’° Price Calculation" expandable="false" expanded="true" width="auto">
                    <form:SimpleForm 
                        editable="false"
                        layout="ResponsiveGridLayout"
                        labelSpanXL="9" labelSpanL="9" labelSpanM="8" labelSpanS="8"
                        adjustLabelSpan="false"
                        emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
                        columnsM="1" columnsL="1" columnsXL="1"
                        singleContainerFullSize="false">

                        <form:content>
                            <Label text="Distance Charge ({distance} km Ã— à¸¿18.50)" />
                            <Text text="à¸¿12,672.50" />

                            <Label text="Weight Charge ({weight} kg Ã— à¸¿2.00)" />
                            <Text text="à¸¿4,900.00" />

                            <Label text="Subtotal" design="Bold" />
                            <Text text="à¸¿17,572.50" class="sapUiBoldText" />

                            <Label text="Fuel Surcharge (+8.5%)" />
                            <Text text="à¸¿1,493.66" />

                            <Label text="Customer Discount (-5%)" />
                            <ObjectStatus text="-à¸¿953.31" state="Success" />

                            <core:Title text="" />

                            <Label text="TOTAL CUSTOMER CHARGE" design="Bold" />
                            <ObjectStatus text="à¸¿18,112.85" state="Information" inverted="true" />

                        </form:content>
                    </form:SimpleForm>
                </Panel>

                <MessageStrip text="Review and Create sales order" type="Information" showIcon="true" class="sapUiSmallMarginTop"/>
            </VBox>
        </content>
        
        
        
        <buttons>
            <Button text="âœï¸ Override Price" type="Attention" press=".onOverridePrice" />
            <Button text="âœ… Confirm &amp; Move to Approval" type="Emphasized" press=".onConfirmCalculation" />
        </buttons>

    </Dialog>
</core:FragmentDefinition>