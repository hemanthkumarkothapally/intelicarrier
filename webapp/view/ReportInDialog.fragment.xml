<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form">

    <Dialog contentWidth="80%" contentHeight="70%" draggable="true" resizable="true" title="Report-In â€” {reportIn>shipmentNo}" class="sapUiResponsivePadding--content">
        <customHeader>
            <Bar>
                <contentLeft>
                    <Title text="Report-In â€” {reportIn>shipmentNo}" />
                </contentLeft>
                <contentRight>
                    <Button icon="sap-icon://decline" type="Transparent" press="onCloseShipment" tooltip="Close" />
                </contentRight>
            </Bar>
        </customHeader>
        <content>
            <VBox width="100%" class="sapUiSmallMargin">
                <VBox class="formBox sapUiMediumMarginTop">
                    <f:SimpleForm backgroundDesign="Transparent" editable="true" layout="ColumnLayout" columnsXL="3" columnsL="3" columnsM="3">
                        <f:content>
                            <Label text="Route"/>
                            <Text text="{reportIn>route}"></Text>
                            <Label text="Driver"/>
                            <Text text="{reportIn>driver}"></Text>
                            <Label text="Vehicle"/>
                            <Text text="{reportIn>vehicleType}"></Text>
                            <Label text="Customer"/>
                            <Text text="{reportIn>customer}"></Text>
                            <Label text="Last Truck Miles"/>
                            <Text text="{reportIn>lastTruckMiles}"></Text>
                        </f:content>
                    </f:SimpleForm>
                </VBox>
                <IconTabBar id="ReportInDialogTabBar" selectedKey="VehicleInfo" backgroundDesign="Transparent" class="sapUiResponsiveContentPadding sapUiMediumMarginTop">
                    <items>
                        <IconTabFilter text="Vehicle Info" key="VehicleInfo">
                            <VBox class="formBox sapUiMediumMarginTop">
                                <HBox alignItems="Center" class="sapUiSmallMarginBottom">
                                    <Title text=" Vehicle &amp; Driver Information" level="H4"/>
                                </HBox>

                                <f:SimpleForm backgroundDesign="Transparent" editable="true" layout="ColumnLayout">
                                    <f:content>
                                        <Label text="Driver" />
                                        <Input value="{reportIn>driver}" editable="false" />

                                        <Label text="Driver ID" />
                                        <Input value="{reportIn>driverId}" editable="false" />

                                        <Label text="Vehicle Plate (à¸«à¸±à¸§à¸£à¸–)" />
                                        <Input value="{reportIn>plate}" placeholder="e.g. 66-0770" />

                                        <Label text="Trailer (à¸«à¸²à¸‡à¸£à¸–)" />
                                        <Input value="{reportIn>trailer}" placeholder="e.g. 99-7788" />

                                        <Label text="Vehicle Type" />
                                        <Input value="{reportIn>vehicleType}" />

                                        <Label text="Vehicle Age" />
                                        <Select selectedKey="{reportIn>vehicleAge}">
                                            <core:Item key="le8" text="â‰¤ 8 à¸›à¸µ" />
                                            <core:Item key="gt8" text="> 8 à¸›à¸µ" />
                                        </Select>

                                        <Label text="Odometer Start (km)" />
                                        <Input value="{reportIn>milesStart}" type="Number" placeholder="e.g. 125430" />

                                        <Label text="Odometer End (km)" />
                                        <Input value="{reportIn>milesEnd}" type="Number" placeholder="Auto-fill on close" />

                                        <Label text="Last Truck Miles" />
                                        <Input value="{reportIn>lastTruckMiles}" editable="false">
                                        </Input>
                                        <Label text="Miles Source" />
                                        <Input value="Truck Master" editable="false" />
                                    </f:content>
                                </f:SimpleForm>
                            </VBox>
                            <MessageStrip class="sapUiMediumMarginTop" enableFormattedText="true" type="Warning" showIcon="true" text="&lt;strong&gt;Miles Checking -System will REJECT data if conditions not met:&lt;/strong&gt;&lt;br&gt;
                                001: First stage - Beginning miles vs Last Truck Miles â‰¤ 50 km&lt;br&gt;
                                002: Stage gap - Previous ending miles vs Current beginning miles â‰¤ 10 km&lt;br&gt;
                                003: Distance variance from standard â‰¤ 15%&lt;br&gt;
                                004: Dummy route tolerance = 100 km&lt;br&gt;
                                005: Broken miles bypass = Enabled" />
                            <FormattedText  />
                        </IconTabFilter>


                        <IconTabFilter text="Stages(Report-In)" key="Stages">
                            <VBox width="100%" class="sapUiSmallMargin">
                                <MessageStrip text="LPGâ€” Case LPG &amp; Chem: Record à¸•à¹‰à¸™à¸—à¸²à¸‡/à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡, à¹„à¸¡à¸¥à¹Œ, and delivery data per stage."></MessageStrip>
                                <Wizard id="StageWizard" finishButtonText="Save" renderMode="Page" showNextButton="true" complete="onWizardCompleted" class="sapUiResponsivePadding--header sapUiResponsivePadding--content">

                                    <WizardStep id="First" title="Stage 1: First Stage" validated="{= 
        (
            !!${reportIn>stages/0/origin} &amp;&amp; 
            !!${reportIn>stages/0/dest} &amp;&amp; 
            !!${reportIn>stages/0/depTime} &amp;&amp; 
            !!${reportIn>stages/0/arrTime} &amp;&amp; 
            !!${reportIn>stages/0/milesStart} &amp;&amp; 
            !!${reportIn>stages/0/milesEnd}
        )
    }" activate="onStepActivate">
                                        <VBox class="sapUiSmallMargin">

                                            <f:SimpleForm editable="true" layout="ColumnLayout" columnsL="2" columnsM="2">
                                                <f:content>
                                                    <core:Title text="Location &amp; Distance" />
                                                    <Label text="à¸•à¹‰à¸™à¸—à¸²à¸‡ (Origin)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/0/origin}" placeholder="Origin location" />

                                                    <Label text="à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Destination)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/0/dest}" placeholder="Destination" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸¡à¸²à¸•à¸£ (Std. Distance)" />
                                                    <Input liveChange="true" value="{reportIn>stages/0/stdDist}" editable="false" description="km" />

                                                    <core:Title text="Timing &amp; Odometer" />
                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸•à¹‰à¸™à¸—à¸²à¸‡ (Departure)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/0/depTime}" />

                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Arrival)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/0/arrTime}" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸•à¹‰à¸™à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/0/milesStart}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/0/milesEnd}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡ GPS" />
                                                    <Input liveChange="true" value="{reportIn>stages/0/gpsDistance}" type="Number" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸ˆà¸£à¸´à¸‡ (à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢-à¸•à¹‰à¸™à¸—à¸²à¸‡)" />
                                                    <Input liveChange="true" value="{reportIn>stages/0/actDistance}" editable="false" description="km" class="sapUiSemantics-Information" />
                                                </f:content>
                                            </f:SimpleForm>
                                            <HBox width="100%" justifyContent="SpaceBetween">
                                                <Button text="Simulate Auto Report-In" press="onSimulateAutoReportIn" icon="sap-icon://iphone"></Button>
                                                <HBox>
                                                    <Button text="clear" press="onClearStage" icon="sap-icon://synchronize"/>
                                                    <Button text="Checkmiles" press="onCheckMiles" icon="sap-icon://search"/>
                                                </HBox>
                                            </HBox>
                                        </VBox>
                                    </WizardStep>

                                    <WizardStep id="Load" title="Stage 2: Load" validated="{= 
     
        (
            !!${reportIn>stages/1/origin} &amp;&amp; 
            !!${reportIn>stages/1/dest} &amp;&amp; 
            !!${reportIn>stages/1/depTime} &amp;&amp; 
            !!${reportIn>stages/1/arrTime} &amp;&amp; 
            !!${reportIn>stages/1/milesStart} &amp;&amp; 
            !!${reportIn>stages/1/milesEnd}
        )
    }" activate="onStepActivate">
                                        <VBox class="sapUiSmallMargin">

                                            <f:SimpleForm editable="true" layout="ColumnLayout" columnsL="2" columnsM="2">
                                                <f:content>
                                                    <core:Title text="Location &amp; Distance" />
                                                    <Label text="à¸•à¹‰à¸™à¸—à¸²à¸‡ (Origin)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/1/origin}" placeholder="Origin location" />

                                                    <Label text="à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Destination)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/1/dest}" placeholder="Destination" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸¡à¸²à¸•à¸£ (Std. Distance)" />
                                                    <Input liveChange="true" value="{reportIn>stages/1/stdDist}" editable="false" description="km" />

                                                    <core:Title text="Timing &amp; Odometer" />
                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸•à¹‰à¸™à¸—à¸²à¸‡ (Departure)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/1/depTime}" />

                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Arrival)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/1/arrTime}" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸•à¹‰à¸™à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/1/milesStart}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/1/milesEnd}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡ GPS" />
                                                    <Input liveChange="true" value="{reportIn>stages/1/gpsDistance}" type="Number" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸ˆà¸£à¸´à¸‡ (à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢-à¸•à¹‰à¸™à¸—à¸²à¸‡)" />
                                                    <Input liveChange="true" value="{reportIn>stages/1/actDistance}" editable="false" description="km" class="sapUiSemantics-Information" />
                                                </f:content>
                                            </f:SimpleForm>
                                            <VBox class="formBox sapUiMediumMarginTop">
                                                <f:SimpleForm backgroundDesign="Transparent" editable="true" layout="ColumnLayout" columnsXL="3" columnsL="3" columnsM="3">
                                                    <f:content>
                                                        <Label text="à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸£à¸–à¸à¹ˆà¸­à¸™à¹‚à¸«à¸¥à¸” (kg)" />
                                                        <Input value="{reportIn>stages/1/weightBefore}" type="Number" />

                                                        <Label text="à¸™à¹‰à¸³à¸«à¸™à¸±à¸à¸£à¸–à¸«à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸” (kg)" />
                                                        <Input value="{reportIn>stages/1/weightAfter}" type="Number" />
                                                    </f:content>
                                                </f:SimpleForm>
                                            </VBox>
                                            <HBox width="100%" justifyContent="SpaceBetween">
                                                <Button text="Simulate Auto Report-In" press="onSimulateAutoReportIn" icon="sap-icon://iphone"></Button>
                                                <HBox>
                                                    <Button text="clear" press="onClearStage" icon="sap-icon://synchronize"/>
                                                    <Button text="Checkmiles" press="onCheckMiles" icon="sap-icon://search"/>
                                                </HBox>
                                            </HBox>
                                        </VBox>
                                    </WizardStep>

                                    <WizardStep id="Customer" title="Stage 3: Customer" validated="{= 
        (
            !!${reportIn>stages/2/origin} &amp;&amp; 
            !!${reportIn>stages/2/dest} &amp;&amp; 
            !!${reportIn>stages/2/depTime} &amp;&amp; 
            !!${reportIn>stages/2/arrTime} &amp;&amp; 
            !!${reportIn>stages/2/milesStart} &amp;&amp; 
            !!${reportIn>stages/2/milesEnd}
        )
    }" activate="onStepActivate">
                                        <VBox class="sapUiSmallMargin">

                                            <f:SimpleForm editable="true" layout="ColumnLayout" columnsL="2" columnsM="2">
                                                <f:content>
                                                    <core:Title text="Location &amp; Distance" />
                                                    <Label text="à¸•à¹‰à¸™à¸—à¸²à¸‡ (Origin)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/2/origin}" placeholder="Origin location" />

                                                    <Label text="à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Destination)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/2/dest}" placeholder="Destination" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸¡à¸²à¸•à¸£ (Std. Distance)" />
                                                    <Input liveChange="true" value="{reportIn>stages/2/stdDist}" editable="false" description="km" />

                                                    <core:Title text="Timing &amp; Odometer" />
                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸•à¹‰à¸™à¸—à¸²à¸‡ (Departure)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/2/depTime}" />

                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Arrival)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/2/arrTime}" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸•à¹‰à¸™à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/2/milesStart}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/2/milesEnd}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡ GPS" />
                                                    <Input liveChange="true" value="{reportIn>stages/2/gpsDistance}" type="Number" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸ˆà¸£à¸´à¸‡ (à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢-à¸•à¹‰à¸™à¸—à¸²à¸‡)" />
                                                    <Input liveChange="true" value="{reportIn>stages/2/actDistance}" editable="false" description="km" class="sapUiSemantics-Information" />
                                                </f:content>
                                            </f:SimpleForm>
                                            <VBox class="formBox sapUiMediumMarginTop">
                                                <f:SimpleForm backgroundDesign="Transparent" editable="true" layout="ColumnLayout" columnsXL="3" columnsL="3" columnsM="3">
                                                    <f:content>
                                                        <Label text="à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¹€à¸­à¸à¸ªà¸²à¸£à¸•à¸±à¹‹à¸§" required="true" />
                                                        <Input value="{reportIn>stages/2/details/ticketNo}" />

                                                        <Label text="à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸­à¸à¸ªà¸²à¸£à¸•à¸±à¹‹à¸§" required="true" />
                                                        <DatePicker value="{reportIn>stages/2/details/ticketDate}" valueFormat="yyyy-MM-dd" displayFormat="dd/MM/yyyy" />

                                                        <Label text="à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¹ƒà¸šà¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ (PO No.)" />
                                                        <Input value="{reportIn>stages/2/details/poNo}" />

                                                        <Label text="à¸›à¸£à¸´à¸¡à¸²à¸“à¸«à¸™à¹‰à¸²à¸•à¸±à¹‹à¸§" required="true" />
                                                        <Input value="{reportIn>stages/2/details/planQty}" description="kg" type="Number" />

                                                        <Label text="à¸›à¸£à¸´à¸¡à¸²à¸“à¸ªà¹ˆà¸‡à¸ˆà¸£à¸´à¸‡" required="true" />
                                                        <Input value="{reportIn>stages/2/details/actualQty}" description="kg" type="Number" />

                                                        <Label text="à¸™à¸™. à¸£à¸–à¸à¹ˆà¸­à¸™à¸¥à¸‡" required="true" />
                                                        <Input value="{reportIn>stages/2/details/weightBefore}" description="kg" type="Number" />

                                                        <Label text="à¸™à¸™. à¸£à¸–à¸«à¸¥à¸±à¸‡à¸¥à¸‡" required="true" />
                                                        <Input value="{reportIn>stages/2/details/weightAfter}" description="kg" type="Number" />

                                                        <Label text="Plan à¸§à¸±à¸™à¹€à¸§à¸¥à¸²à¸–à¸¶à¸‡" />
                                                        <DateTimePicker value="{reportIn>stages/2/details/plannedArrival}" />

                                                        <Label text="à¸§à¸±à¸™à¹€à¸§à¸¥à¸²à¸•à¸²à¸¡à¹à¸œà¸™à¸¥à¸¹à¸à¸„à¹‰à¸²" />
                                                        <TimePicker value="{reportIn>stages/2/details/waitingStartTime}" />

                                                        <Label text="à¹€à¸§à¸¥à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸£à¸­(à¸à¸²)" />
                                                        <TimePicker value="{reportIn>stages/2/details/unloadingStartTime}" />

                                                        <Label text="à¹€à¸§à¸¥à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸¥à¸‡/à¸¥à¸·à¹ˆ" />
                                                        <TimePicker value="{reportIn>stages/2/details/unloadingStartTime}" />

                                                        <Label text="à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸ (Remarks)" />
                                                        <TextArea value="{reportIn>stages/2/details/remarks}" rows="3" />

                                                    </f:content>
                                                </f:SimpleForm>

                                                <CheckBox selected="{reportIn>stages/2/details/c1}" text="à¸£à¸­à¸¥à¸‡à¸„à¹ˆà¸²à¸Š"></CheckBox>
                                                <CheckBox selected="{reportIn>stages/2/details/c2}" text="à¸¥à¸‡à¸à¹Šà¸²à¸‹à¹„à¸¡à¹ˆà¹„à¸”à¹‰"></CheckBox>
                                            </VBox>
                                            <HBox width="100%" justifyContent="SpaceBetween">
                                                <Button text="Simulate Auto Report-In" press="onSimulateAutoReportIn" icon="sap-icon://iphone"></Button>
                                                <HBox>
                                                    <Button text="clear" press="onClearStage" icon="sap-icon://synchronize"/>
                                                    <Button text="Checkmiles" press="onCheckMiles" icon="sap-icon://search"/>
                                                </HBox>
                                            </HBox>
                                        </VBox>
                                    </WizardStep>

                                    <WizardStep id="Last" title="Stage 4: Last" validated="{= 
        (
            !!${reportIn>stages/3/origin} &amp;&amp; 
            !!${reportIn>stages/3/dest} &amp;&amp; 
            !!${reportIn>stages/3/depTime} &amp;&amp; 
            !!${reportIn>stages/3/arrTime} &amp;&amp; 
            !!${reportIn>stages/3/milesStart} &amp;&amp; 
            !!${reportIn>stages/3/milesEnd}
        )
    }" activate="onStepActivate">
                                        <VBox class="sapUiSmallMargin">

                                            <f:SimpleForm editable="true" layout="ColumnLayout" columnsL="2" columnsM="2">
                                                <f:content>
                                                    <core:Title text="Location &amp; Distance" />
                                                    <Label text="à¸•à¹‰à¸™à¸—à¸²à¸‡ (Origin)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/3/origin}" placeholder="Origin location" />

                                                    <Label text="à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Destination)" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/3/dest}" placeholder="Destination" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸¡à¸²à¸•à¸£ (Std. Distance)" />
                                                    <Input liveChange="true" value="{reportIn>stages/3/stdDist}" editable="false" description="km" />

                                                    <core:Title text="Timing &amp; Odometer" />
                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸•à¹‰à¸™à¸—à¸²à¸‡ (Departure)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/3/depTime}" />

                                                    <Label text="à¸§à¸±à¸™-à¹€à¸§à¸¥à¸²à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (Arrival)" required="true" />
                                                    <DateTimePicker value="{reportIn>stages/3/arrTime}" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸•à¹‰à¸™à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/3/milesStart}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¹€à¸¥à¸‚à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡" required="true" />
                                                    <Input liveChange="true" value="{reportIn>stages/3/milesEnd}" type="Number" change="onMilesValidation" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡ GPS" />
                                                    <Input liveChange="true" value="{reportIn>stages/3/gpsDistance}" type="Number" description="km" />

                                                    <Label text="à¸£à¸°à¸¢à¸°à¸—à¸²à¸‡à¸ˆà¸£à¸´à¸‡ (à¹„à¸¡à¸¥à¹Œà¸›à¸¥à¸²à¸¢-à¸•à¹‰à¸™à¸—à¸²à¸‡)" />
                                                    <Input liveChange="true" value="{reportIn>stages/3/actDistance}" editable="false" description="km" class="sapUiSemantics-Information" />
                                                </f:content>
                                            </f:SimpleForm>
                                            <HBox width="100%" justifyContent="SpaceBetween">
                                                <Button text="Simulate Auto Report-In" press="onSimulateAutoReportIn" icon="sap-icon://iphone"></Button>
                                                <HBox>
                                                    <Button text="clear" press="onClearStage" icon="sap-icon://synchronize"/>
                                                    <Button text="Checkmiles" press="onCheckMiles" icon="sap-icon://search"/>
                                                </HBox>
                                            </HBox>
                                        </VBox>
                                    </WizardStep>
                                </Wizard>
                            </VBox>
                        </IconTabFilter>
                        <IconTabFilter text="Expenses" key="Expenses">
                            <MessageStrip text="à¸šà¸±à¸™à¸—à¸¶à¸à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢ (Record Expenses) â€” Toll, meals, overnight, miscellaneous."></MessageStrip>
                            <List mode="Delete" items="{reportIn>expenses}" delete="onDeleteExpense">
                                <headerToolbar>
                                    <Toolbar>
                                        <Title text="Trip Expenses" />
                                        <ToolbarSpacer />
                                        <Button text="Add Expenses" press="onAddExpense" type="Ghost" icon="sap-icon://add" />
                                    </Toolbar>
                                </headerToolbar>
                                <CustomListItem>
                                    <HBox alignItems="Center" width="100%" class="sapUiTinyMargin">
                                        <ComboBox selectedKey="{reportIn>cat}" width="150px" placeholder="Category">
                                            <items>
                                                <core:Item key="Toll" text="ðŸ›£ï¸ Toll" />
                                                <core:Item key="Meal" text="ðŸ½ï¸ Meal" />
                                                <core:Item key="Other" text="ðŸ“‹ Other" />
                                            </items>
                                        </ComboBox>

                                        <Input value="{reportIn>desc}" placeholder="Description" class="sapUiTinyMarginBegin">
                                            <layoutData>
                                                <FlexItemData growFactor="1" />
                                            </layoutData>
                                        </Input>
                                        <Input type="Number" change="onAmountChange" value="{reportIn>amt}" width="120px" textAlign="End" placeholder="0.00" description="à¸¿" class="sapUiTinyMarginBegin" />
                                    </HBox>
                                </CustomListItem>
                            </List>
                            <HBox>
                                <Title text="Total Amount:" titleStyle="H6" />
                                <ObjectNumber number="{
                    path: 'reportIn>te',
                    type: 'sap.ui.model.type.Float',
                    formatOptions: { minFractionDigits: 2, maxFractionDigits: 2 }
                }" unit="à¸¿" state="Error" />
                            </HBox>
                        </IconTabFilter>
                        <IconTabFilter text="Fuel" key="Fuel">
                            <MessageStrip text=" à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹€à¸•à¸´à¸¡à¹€à¸Šà¸·à¹‰à¸­à¹€à¸žà¸¥à¸´à¸‡ â€” Record fuel fills."></MessageStrip>
                            <Table mode="Delete" items="{reportIn>fuelEntries}" delete="onDeleteFuel">
                                <headerToolbar>
                                    <Toolbar>
                                        <Title text="â›½ Fuel Records" />
                                        <ToolbarSpacer />
                                        <Button text="Add Fuel" press="onAddFuel" type="Ghost" icon="sap-icon://add" />
                                    </Toolbar>
                                </headerToolbar>
                                <columns>
                                    <Column minScreenWidth="Tablet" demandPopin="true">
                                        <Text text="Station" />
                                    </Column>
                                    <Column minScreenWidth="Tablet" demandPopin="true">
                                        <Text text="Fuel Type" />
                                    </Column>
                                    <Column hAlign="End">
                                        <Text text="Liters" />
                                    </Column>
                                    <Column hAlign="End">
                                        <Text text="Amount (à¸¿)" />
                                    </Column>
                                    <Column minScreenWidth="Desktop" demandPopin="true">
                                        <Text text="Shared?" />
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Input value="{reportIn>station}" placeholder="e.g., PTT Bang Pakong" />
                                            <Select selectedKey="{reportIn>type}">
                                                <items>
                                                    <core:Item key="Diesel B7" text="Diesel B7" />
                                                    <core:Item key="NGV" text="NGV" />
                                                </items>
                                            </Select>
                                            <Input value="{reportIn>liters}" type="Number" textAlign="End" change="onFuelCalculation" />
                                            <ObjectNumber number="{
                        path: 'reportIn>amt',
                        type: 'sap.ui.model.type.Float',
                        formatOptions: { minFractionDigits: 2 }
                    }" unit="à¸¿" state="Warning" />
                                            <Select selectedKey="{reportIn>shared}">
                                                <items>
                                                    <core:Item key="No" text="No" />
                                                    <core:Item key="Yes" text="Yes" />
                                                </items>
                                            </Select>
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                            <HBox>
                                <Title text="Total Amount:" titleStyle="H6" />
                                <ObjectNumber number="{
                    path: 'reportIn>tf',
                    type: 'sap.ui.model.type.Float',
                    formatOptions: { minFractionDigits: 2, maxFractionDigits: 2 }
                }" unit="à¸¿" state="Warning" />
                            </HBox>

                        </IconTabFilter>
                        <IconTabFilter text="Parking" key="Parking">
                            <MessageStrip text="à¸šà¸±à¸™à¸—à¸¶à¸à¸„à¹ˆà¸²à¸ˆà¸­à¸”à¸£à¸– (Record Parking)"></MessageStrip>
                            <Table mode="Delete" items="{reportIn>parkingEntries}" delete="onDeleteParking">
                                <headerToolbar>
                                    <Toolbar>
                                        <Title text="ðŸ…¿ï¸ Parking Records" />
                                        <ToolbarSpacer />
                                        <Button text="Add Parking" press="onAddParking" type="Ghost" icon="sap-icon://add" />
                                    </Toolbar>
                                </headerToolbar>
                                <columns>
                                    <Column>
                                        <Text text="Location" />
                                    </Column>
                                    <Column minScreenWidth="Tablet" demandPopin="true">
                                        <Text text="Date" />
                                    </Column>
                                    <Column hAlign="End">
                                        <Text text="Hours" />
                                    </Column>
                                    <Column hAlign="End">
                                        <Text text="Amount (à¸¿)" />
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Input value="{reportIn>loc}" placeholder="e.g., Rest Area 1" />
                                            <DatePicker value="{reportIn>date}" valueFormat="yyyy-MM-dd" displayFormat="dd.MM.yyyy" />
                                            <Input value="{reportIn>hrs}" type="Number" textAlign="End" placeholder="0" />
                                            <Input value="{reportIn>amt}" type="Number" textAlign="End" change="onParkingAmountChange" placeholder="0.00" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                            <HBox>
                                <Title text="Subtotal Parking:" titleStyle="H6" />
                                <ObjectNumber number="{
                    path: 'reportIn>tp',
                    type: 'sap.ui.model.type.Float',
                    formatOptions: { minFractionDigits: 2 },
                    formatter: '.formatter.formatTotal'
                }" unit="à¸¿" state="Success" />
                            </HBox>
                        </IconTabFilter>
                        <IconTabFilter text="Review &amp; Close" key="Review">
                            <VBox class="sapUiSmallMargin">
                                <Title text="ðŸ“Š Trip Summary" titleStyle="H3" class="sapUiSmallMarginBottom" />

                                <f:SimpleForm editable="false" layout="ResponsiveGridLayout" labelSpanL="4" labelSpanM="4">
                                    <f:content>
                                        <core:Title text="Stage Progress" />
                                        <Label text="Stages" />
                                        <Text text="{reportIn>stageProgress}" />

                                        <Label text="Total Std Distance" />
                                        <ObjectNumber number="{= ${reportIn>milesEnd}-${reportIn>milesStart}}" unit="km" />

                                        <core:Title text="Cost Breakdown" />
                                        <Label text="Expenses" />
                                        <ObjectNumber number="{= ${reportIn>te}||0}" unit="à¸¿" state="Error"/>

                                        <Label text="Fuel" />
                                        <ObjectNumber number="{= ${reportIn>tf}||0}" unit="à¸¿" state="Warning" />

                                        <Label text="Parking" />
                                        <ObjectNumber number="{= ${reportIn>tp}||0}" unit="à¸¿" state="Success" />

                                        <Label text="TOTAL" />
                                        <ObjectNumber number="{= ( ${reportIn>tp} || 0 ) + ( ${reportIn>te} || 0 ) + ( ${reportIn>tf} || 0 ) }" unit="à¸¿" state="Information" emphasized="true" />
                                    </f:content>
                                </f:SimpleForm>
                            </VBox>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
            </VBox>
        </content>

        <beginButton>
            <Button text="Save Draft" press=".onCloseShipment"/>
        </beginButton>
        <endButton>
            <Button text="Submit For Review" type="Critical" icon="sap-icon://upload" press=".onCloseShipment"/>
        </endButton>


    </Dialog>
</core:FragmentDefinition>
