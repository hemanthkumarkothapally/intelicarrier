<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.ui.layout.form">

    <Dialog id="fleetCockpitDialog" contentWidth="80%" contentHeight="70%" draggable="true" resizable="true" title="Fleet Cockpit Analysis" class="sapUiResponsivePadding--content">

        <!-- ===== HEADER ===== -->
        <!-- <customHeader >
            <Bar >
                <contentLeft>
                    <HBox>
                        <core:Icon src="sap-icon://shipping-status" class="sapUiTinyMarginEnd"/>
                        <VBox>
                            <Title text="Fleet Cockpit Analysis" level="H4"/>
                            <Text text="{selectedOrder>/orderId} - {selectedOrder>/customer}" />
                        </VBox>
                    </HBox>
                </contentLeft>
                <contentRight>
                    <Button icon="sap-icon://decline" press=".onCloseFleetCockpit"/>
                </contentRight>
            </Bar>
        </customHeader> -->

        <!-- ===== CONTENT ===== -->
        <content>
            <VBox width="100%" class="sapUiSmallMargin">

                <!-- ORDER SUMMARY -->
                <Panel headerText="Order Summary" width="100%">
                    <HBox justifyContent="SpaceBetween" wrap="NoWrap">

                        <VBox>
                            <Title text="Route" class="sapUiTinyMarginBottom"/>
                            <Text text="{selectedOrder>/from} â†’ {selectedOrder>/to}" class="sapUiBoldText"/>
                            <Text text="{selectedOrder>/distance}"/>
                        </VBox>

                        <VBox>
                            <Title text="Cargo" class="sapUiTinyMarginBottom"/>
                            <Text text="{selectedOrder>/cargoType}" class="sapUiBoldText"/>
                            <Text text="{selectedOrder>/cargoInfo}"/>
                        </VBox>

                        <VBox>
                            <Title text="Delivery Date"/>
                            <Text text="{selectedOrder>/deliveryDate}" class="sapUiBoldText"/>
                        </VBox>

                        <VBox>
                            <Title text="Priority"/>
                            <ObjectStatus text="{selectedOrder>/priority}" state="{selectedOrder>/priorityState}"/>
                        </VBox>

                        <VBox>
                            <Title text="Value"/>
                            <Text text="{selectedOrder>/value}" class="sapUiBoldText sapUiPositiveText"/>
                        </VBox>

                    </HBox>
                </Panel>
                <Panel >
                    <content>

                        <VBox >

                            <!-- Row 1 : Customer + Contact -->
                            <HBox width="100%" class="sapUiSmallMarginBottom">
                                <VBox width="50%" class="sapUiSmallMarginEnd">
                                    <Label text="CUSTOMER NAME" design="Bold"/>
                                    <Input value="Atlas-LPG Corp"/>
                                </VBox>

                                <VBox width="50%">
                                    <Label text="CONTACT PERSON" design="Bold"/>
                                    <Input value="Mr. Somchai"/>
                                </VBox>
                            </HBox>

                            <!-- Row 2 : Origin + Destination -->
                            <HBox width="100%" class="sapUiSmallMarginBottom">
                                <VBox width="50%" class="sapUiSmallMarginEnd">
                                    <Label text="ORIGIN" design="Bold"/>
                                    <Input value="Bangkok (Bangchak Depot)"/>
                                </VBox>

                                <VBox width="50%">
                                    <Label text="DESTINATION" design="Bold"/>
                                    <Input value="Chiang Mai (LPG Station)"/>
                                </VBox>
                            </HBox>

                            <!-- Row 3 : Cargo + Weight + Volume + Delivery -->
                            <HBox width="100%">
                                <VBox width="25%" class="sapUiSmallMarginEnd">
                                    <Label text="CARGO DESCRIPTION" design="Bold"/>
                                    <Input value="LPG Gas"/>
                                </VBox>

                                <VBox width="25%" class="sapUiSmallMarginEnd">
                                    <Label text="WEIGHT (KG)" design="Bold"/>
                                    <Input value="6030" valueState="Warning"/>
                                </VBox>

                                <VBox width="25%" class="sapUiSmallMarginEnd">
                                    <Label text="VOLUME (MÂ³)" design="Bold"/>
                                    <Input value="13" valueState="Warning"/>
                                </VBox>

                                <VBox width="25%">
                                    <Label text="DELIVERY DATE" design="Bold"/>
                                    <DatePicker value="16-01-2026" displayFormat="dd-MM-yyyy" valueFormat="dd-MM-yyyy"/>
                                </VBox>
                            </HBox>

                        </VBox>

                    </content>
                </Panel>
                <Panel >
   <!-- Row 1 (Dropdowns) -->
            <HBox width="100%" justifyContent="SpaceBetween">

                <!-- Product Type -->
                <VBox width="48%">
                    <Label text="PRODUCT TYPE *" design="Bold"/>

                    <Select
                        width="98%"
                        selectedKey="{formModel>/productType}"
                        change=".onProductOrRouteChange">

                        <items>
                            <core:Item key="" text="-- Select Product Type --"/>
                            <core:Item key="LPG" text="LPG (Liquefied Petroleum Gas)" />
                            <core:Item key="FUEL_WO" text="Fuel WO (Fuel Work Order)" />
                            <core:Item key="NGV" text="NGV (Natural Gas Vehicle)" />
                            <core:Item key="CHEM" text="Chemical" />
                            <core:Item key="CONT" text="Container" />
                        </items>
                    </Select>
                </VBox>

                <!-- Route Code -->
                <VBox width="48%">
                    <Label text="ROUTE CODE *" design="Bold"/>

                    <Select
                        width="98%"
                        selectedKey="{formModel>/routeCode}"
                        change=".onProductOrRouteChange">

                        <items>
                            <core:Item key="" text="-- Select Route --"/>
                            <core:Item key="RT-CONT-001" text="RT-CONT-001 - LCB-BKK ICD"/>
                            <core:Item key="RT-CONT-002" text="RT-CONT-002 - BKK-CNX"/>
                            <core:Item key="RT-LPG-001" text="RT-LPG-001 - BKK-HKT"/>
                        </items>
                    </Select>
                </VBox>

            </HBox>
            <!-- Row 2 (Info box) Visible only when both selected -->
            <VBox
                class="sapUiSmallMarginTop routeInfoBox"
                visible="{= ${formModel>/distance} !== ''}"
                >

                <HBox justifyContent="SpaceBetween" class="sapUiSmallMargin">

                    <VBox width="25%">
                        <Text text="DISTANCE" class="sapUiContentLabel"/>
                        <Text text="{formModel>/distance}" class="sapUiBoldText"/>
                    </VBox>

                    <VBox width="25%">
                        <Text text="EST. DURATION" class="sapUiContentLabel"/>
                        <Text text="{formModel>/duration}" class="sapUiBoldText"/>
                    </VBox>

                    <VBox width="25%">
                        <Text text="BASE RATE" class="sapUiContentLabel"/>
                        <Text text="{formModel>/baseRate}" class="sapUiBoldText"/>
                    </VBox>

                    <VBox width="25%">
                        <Text text="ZLSDE SCREEN" class="sapUiContentLabel"/>
                        <Link text="{formModel>/zlsdeScreen}" press=".onOpenZlsdeScreen"/>
                    </VBox>

                </HBox>

            </VBox>

                </Panel>


                <!-- <HBox width="100%" class="sapUiMediumMarginTop" alignItems="Stretch" justifyContent="SpaceAround"> -->
                <FlexBox width="100%" wrap="NoWrap" alignItems="Stretch" class="sapUiMediumMarginBottom">
                    <List headerText="ðŸš› Internal Fleet Options" selectionChange="onCarrierListSelected" class=" ab12345 sapUiTinyMarginEnd" mode="SingleSelectMaster">
                        <layoutData>
                            <FlexItemData growFactor="1"/>
                        </layoutData>
                        <CustomListItem class="sapUiTinyMargin">
                            <VBox class="sapUiSmallMargin">

                                <Text text="ðŸš›TH-1234 - 6-Wheeler Truck" class="sapUiBoldText"/>


                                <Text text="Driver: Somchai Prasert"/>
                                <HBox justifyContent="Start" alignItems="Center" class="sapUiTinyMargin">
                                    <Text text="ETA: 2 day(s)"/>
                                    <Text text="Capacity: 8,000 kg"/>
                                    <Text text="à¸¿ 11,398" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 9,000 | Fuel: à¸¿ 2,398" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                        <CustomListItem>
                            <VBox class="sapUiSmallMargin">
                                <Text text="ðŸš› TH-2345 - 10-Wheeler Truck" class="sapUiBoldText"/>
                                <Text text="Driver: Wichai Thongsuk"/>
                                <HBox justifyContent="Start" class="sapUiTinyMargin">
                                    <Text text="ETA: 2 day(s)"/>
                                    <Text text="Capacity: 15,000 kg"/>
                                    <Text text="à¸¿ 15,398" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 13,000 | Fuel: à¸¿ 2,398" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                        <CustomListItem>
                            <VBox class="sapUiSmallMargin">
                                <Text text="ðŸš› TH-6789 - Refrigerated Truck" class="sapUiBoldText"/>
                                <Text text="Driver: Surachai Pranee"/>
                                <HBox justifyContent="Start" class="sapUiTinyMargin">
                                    <Text text="ETA: 2 day(s)"/>
                                    <Text text="Capacity: 5,000 kg"/>
                                    <Text text="à¸¿ 17,398" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 15,000 | Fuel: à¸¿ 2,398" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                    </List>


                    <List headerText="ðŸ¢ External Carrier Options" mode="SingleSelectMaster" selectionChange=".onCarrierListSelected" class="ab12345 sapUiTinyMarginBegin">
                        <layoutData>
                            <FlexItemData growFactor="1"/>
                        </layoutData>
                        <CustomListItem selected="true">
                            <VBox class="sapUiSmallMargin">
                                <Text text="ðŸ¢ J&amp;T Express" class="sapUiBoldText"/>
                                <ObjectStatus text="â˜…â˜…â˜…â˜…â˜† 4.5"/>
                                <HBox justifyContent="Start" class="sapUiTinyMargin">
                                    <Text text="Lead Time: 2â€“3 days"/>
                                    <Text text="Coverage: Nationwide"/>
                                    <Text text="à¸¿ 4,110" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 140 | Distance: à¸¿ 4,110" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                        <CustomListItem>
                            <VBox class="sapUiSmallMargin">
                                <Text text="ðŸ¢ Flash Express" class="sapUiBoldText"/>
                                <ObjectStatus text="â˜…â˜…â˜…â˜…â˜† 4.6"/>
                                <HBox justifyContent="Start" class="sapUiTinyMargin">
                                    <Text text="Lead Time: 1â€“3 days"/>
                                    <Text text="Coverage: Nationwide"/>
                                    <Text text="à¸¿ 4,945" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 150 | Distance: à¸¿ 4,795" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                        <CustomListItem>
                            <VBox class="sapUiSmallMargin">
                                <Text text="ðŸ¢ Kerry Express Thailand" class="sapUiBoldText"/>
                                <ObjectStatus text="â˜…â˜…â˜…â˜…â˜† 4.8"/>
                                <HBox justifyContent="Start" class="sapUiTinyMargin">
                                    <Text text="Lead Time: 1â€“2 days"/>
                                    <Text text="Coverage: Nationwide"/>
                                    <Text text="à¸¿ 5,655" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 175 | Distance: à¸¿ 5,480" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                        <CustomListItem>
                            <VBox class="sapUiSmallMargin">
                                <Text text="ðŸ¢ SCG Logistics" class="sapUiBoldText"/>
                                <ObjectStatus text="â˜…â˜…â˜…â˜…â˜† 4.7"/>
                                <HBox justifyContent="Start" class="sapUiTinyMargin">
                                    <Text text="Lead Time: 1â€“2 days"/>
                                    <Text text="Coverage: Regional"/>
                                    <Text text="à¸¿ 7,075" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 225 | Distance: à¸¿ 6,850" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                        <CustomListItem>
                            <VBox class="sapUiSmallMargin">
                                <Text text="ðŸ¢ DHL Thailand" class="sapUiBoldText"/>
                                <ObjectStatus text="â˜…â˜…â˜…â˜…â˜† 4.9"/>
                                <HBox justifyContent="Start" class="sapUiTinyMargin">
                                    <Text text="Lead Time: 1â€“2 days"/>
                                    <Text text="Coverage: International"/>
                                    <Text text="à¸¿ 8,470" class="sapUiBoldText sapUiPositiveText"/>
                                </HBox>
                                <Text text="Base: à¸¿ 250 | Distance: à¸¿ 8,220" class="sapUiTinyMarginTop"/>
                            </VBox>
                        </CustomListItem>

                    </List>

                </FlexBox>
                <!-- </HBox> -->
                <!-- <Panel class="sapUiMediumMarginTop recomendation" backgroundDesign="Solid">

                    <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMargin">

                        <VBox alignItems="Center">
                            <core:Icon src="sap-icon://shipping-status" color="blue"/>
                            <Title text="Best Internal"/>
                            <Text text="à¸¿ 11,398" class="sapUiBoldText sapUiPositiveText"/>
                            <Text text="TH-1234"/>
                        </VBox>

                        <core:Icon src="sap-icon://compare"/>

                        <VBox alignItems="Center">
                            <core:Icon src="sap-icon://supplier" color="green"/>
                            <Title text="Best External"/>
                            <Text text="à¸¿ 4,110" class="sapUiBoldText sapUiPositiveText"/>
                            <Text text="J&amp;T Express"/>
                        </VBox>

                        <Button text="External Carrier" type="Emphasized" icon="sap-icon://accept"/>
                    </HBox>
                </Panel> -->
                <HBox id="selectedCarrierBox" visible="{= ${selectionModel>/visible} }" class="sapUiSmallMarginTop sapUiSmallMarginBottom selectedCarrierBox" alignItems="Center" justifyContent="Start">

                    <HBox class="sapUiSmallMargin">
                        <Text text="âœ“ Selected:" class="sapUiBoldText sapUiTinyMarginEnd"/>
                        <Text text="{selectionModel>/text}" class="sapUiTinyMarginEnd"/>
                        <!-- <Text text="({selectionModel>/price})" class="sapUiBoldText sapUiPositiveText"/> -->
                    </HBox>

                </HBox>
                <Panel >
                
                <HBox width="100%" justifyContent="SpaceBetween">

                <!-- Product Type -->
                <VBox width="48%">
                        <Label text="SELECT DRIVER *" design="Bold"/>
                    <Select
                        width="100%"
                        selectedKey="{driverModel>/selectedDriverId}"
                        change=".onDriverChange">

                        <items>
                            <core:Item key="" text="-- Select Driver --"/>
                            <core:Item key="DRV-003" text="Narong Somjai (Class 2 + Fuel)"/>
                            <core:Item key="DRV-001" text="Somchai Prasert (Class 1)"/>
                            <core:Item key="DRV-002" text="Wichai Thongsuk (Class 2)"/>
                        </items>
                    </Select>
                
                </VBox>

                <!-- Route Code -->
                <VBox width="48%">
                    <Label text="DRIVER DETAILS" design="Bold"/>

                    <Text
                        text="{driverModel>/driverDetails}"
                        class="sapUiTinyMarginTop"/>
        

                </VBox>

            </HBox>
                </Panel>
                
                <Panel
    backgroundDesign="Solid"
    visible="{= ${driverModel>/selectedDriverId} !== '' }">
        <VBox class=" costBox">

            <HBox justifyContent="SpaceBetween" class="sapUiTinyMarginBottom">
                <Text text="Base Transport Cost"/>
                <Text text="{driverModel>/cost/base}" class="sapUiBoldText"/>
            </HBox>

            <HBox justifyContent="SpaceBetween" class="sapUiTinyMarginBottom">
                <Text text="Fuel Cost (Est.)"/>
                <Text text="{driverModel>/cost/fuel}" class="sapUiBoldText sapUiCriticalText"/>
            </HBox>

            <HBox justifyContent="SpaceBetween" class="sapUiTinyMarginBottom">
                <Text text="Distance Surcharge"/>
                <Text text="{driverModel>/cost/surcharge}" class="sapUiBoldText"/>
            </HBox>

            <HBox justifyContent="SpaceBetween" class="sapUiTinyMarginBottom">
                <Text text="Service Fee"/>
                <Text text="{driverModel>/cost/serviceFee}" class="sapUiBoldText"/>
            </HBox>

            <Toolbar class="sapUiSmallMarginTop">
                <ToolbarSpacer/>
                <VBox alignItems="End" height="60px">
                    <Text text="Total Estimated Cost" class="sapUiBoldText"/>
                    <Text text="{driverModel>/cost/total}" class="sapUiBoldText sapUiPositiveText"/>
                </VBox>
            </Toolbar>

        </VBox>
    
                </Panel>


            </VBox>
        </content>

        <!-- ===== FOOTER ===== -->
        <beginButton>
            <Button text="Cancel" press=".onCloseFleetCockpit"/>
        </beginButton>
        <endButton>
            <Button text="Confirm Assignment" type="Accept" press=".onConformpres"/>
        </endButton>


    </Dialog>
</core:FragmentDefinition>
